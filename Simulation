#include <stdio.h> 
#include <stdlib.h>
#include <math.h>
#define biler_2020 125200
#define total_arlig_vaekst 0.027
#define arlig_vaekst_bro 0.0117
#define arlig_vaekst_tunnel 0.033
#define biler_2020_bro 34400
#define biler_2020_tunnel 90800
#define biler_2020_bro_med_Egholm 26900
#define biler_2020_tunnel_med_Egholm 69600
#define kapacitet_bro    31000
#define kapacitet_tunnel 80000
#define kapacitet_egholm 59000
#define antal_baner 2
#define laengde_af_bro 105

float Egholm_linje(int k,int Egholm_trafik);
int* search_bro (int bro[antal_baner][laengde_af_bro]);

int main (void){
    int i,j,k;
    int Egholmtrafik=28700;
    int bro[antal_baner][laengde_af_bro];
    int *B;
    for(i=0; i<antal_baner; i++) {
      for(j=0;j<laengde_af_bro;j++) {
          bro[i][j]=0;
          bro[0][1]=1;
          bro[1][50]=1;
          printf("%d",bro[i][j]);
          if (j==(laengde_af_bro-1)){
              printf("\n");
              }}}

     for (k=2020;Egholmtrafik<kapacitet_egholm;k++){
        Egholmtrafik=Egholm_linje(k,Egholmtrafik);
        printf("\n");

        B=search_bro(bro);

        

        for(i=0; i<antal_baner; i++) {
      for(j=0;j<laengde_af_bro;j++) {
          bro[i][j]=B[i*laengde_af_bro+j];
           printf("%d",bro[i][j]);
          if (j==(laengde_af_bro-1)){
              printf("\n");
               }}}
     free (B);
     }

     

    return 0;
}

float Egholm_linje(int k,int Egholm_trafik){
    int n;
    float vbro,ybro,vtunel,ytunel,ekstravaegt_bro=0,ekstravaegt_tunnel=0;
        
        n = k - 2020;
        vbro=arlig_vaekst_bro*biler_2020_bro_med_Egholm*n;    
        ybro=biler_2020_bro_med_Egholm+vbro;
        vtunel=arlig_vaekst_tunnel*biler_2020_tunnel_med_Egholm*n;
        ytunel=biler_2020_tunnel_med_Egholm+vtunel;
        
        if(ybro>kapacitet_bro){
            ekstravaegt_bro=ybro-kapacitet_bro;}
            if(ytunel>kapacitet_tunnel){
               ekstravaegt_tunnel=ytunel-kapacitet_tunnel;}
               Egholm_trafik=ekstravaegt_bro+ekstravaegt_tunnel+28700;
    
    
            printf(" ar : %d \t trafik tallet: %d\n",k,Egholm_trafik);
            return Egholm_trafik;
}
int* search_bro (int bro[antal_baner][laengde_af_bro]){
    int i,j;
    int *pointer=(int *)malloc(antal_baner*laengde_af_bro*sizeof(int));
  for(i=0; i<antal_baner; i++) {
      for(j=0;j<laengde_af_bro;j++) {
          pointer[i*laengde_af_bro+j]=bro[i][j];
            /*printf("%d",pointer[i*laengde_af_bro+j]);*/
          if(bro[i][j]!=1){
              printf("");
            }
          else {
              printf("there is a car in %d %d\n",i,j);
            }

        }
        printf("\n");
    }

    
          return pointer;

}